{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,n,t){},81:function(e,n,t){\"use strict\";t.r(n);var c=t(1),s=t.n(c),r=t(38),a=t.n(r),i=t(15),u=(t(45),t(40)),o=t(22),d=t(39),l=t.n(d),j=\"new-message-event\",b=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],s=n[1],r=Object(c.useRef)();Object(c.useEffect)((function(){return r.current=l()(\"http://localhost:3030\"),r.current.on(j,(function(e){var n=Object(o.a)(Object(o.a)({},e),{},{isOwner:e.senderId===r.current.id});s((function(e){return[].concat(Object(u.a)(e),[n])}))})),function(){r.current.disconnect()}}),[]);return{messages:t,sendMessage:function(e){r.current.emit(j,{body:e,senderId:r.current.id})}}},O=t(0);var f=function(){var e=b(),n=e.messages,t=e.sendMessage,s=Object(c.useState)(\"\"),r=Object(i.a)(s,2),a=r[0],u=r[1],o=Object(c.useRef)();return console.log(n),Object(O.jsx)(\"div\",{className:\"App\",children:Object(O.jsxs)(\"div\",{className:\"container\",children:[Object(O.jsxs)(\"div\",{className:\"message-container\",children:[Object(O.jsx)(\"ul\",{children:n.map((function(e,n){return\"\"!==e.body?Object(O.jsxs)(\"li\",{children:[e.senderId,\" \",e.body]},n):null}))}),Object(O.jsx)(\"div\",{ref:o})]}),Object(O.jsxs)(\"div\",{className:\"action-container\",children:[Object(O.jsx)(\"input\",{className:\"message-input\",placeholder:\"enter message here\",variant:\"outlined\",value:a,onChange:function(e){e.preventDefault(),u(e.target.value)},onKeyUp:function(e){\"Enter\"===e.key&&(t(a),u(\"\"))}}),Object(O.jsx)(\"button\",{disabled:\"\"===a,onClick:function(){a&&(t(a),u(\"\"))},className:\"send-button\",children:\"Send\"})]})]})})};a.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(f,{})}),document.getElementById(\"root\"))}},[[81,1,2]]]);","name":"static/js/main.29c5641f.chunk.js","map":{"version":3,"sources":["static/js/main.29c5641f.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","toConsumableArray","objectSpread2","build","build_default","NEW_MESSAGE_EVENT","src_ChatRoom","_useState","Object","_useState2","messages","setMessages","socketRef","current","on","message","incomingMessage","isOwner","senderId","id","concat","disconnect","sendMessage","messageBody","emit","body","jsx_runtime","src_App","_ChatRoom","newMessage","setNewMessage","messageRef","console","log","className","children","map","i","ref","placeholder","variant","value","onChange","e","preventDefault","target","onKeyUp","key","disabled","onClick","a","render","StrictMode","document","getElementById"],"mappings":"CAACA,KAAyB,mBAAIA,KAAyB,oBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpE,GACA,SAAUC,EAAQC,EAASC,KAM3B,GACA,SAAUF,EAAQG,EAAqBD,GAE7C,aAEAA,EAAoBE,EAAED,GAGtB,IAAIE,EAAQH,EAAoB,GAC5BI,EAA6BJ,EAAoBK,EAAEF,GAGnDG,EAAYN,EAAoB,IAChCO,EAAiCP,EAAoBK,EAAEC,GAGvDE,EAAgBR,EAAoB,IAMpCS,GAHMT,EAAoB,IAGNA,EAAoB,KAGxCU,EAAgBV,EAAoB,IAGpCW,EAAQX,EAAoB,IAC5BY,EAA6BZ,EAAoBK,EAAEM,GAGnDE,EAAkB,oBAA0gCC,EAAl7B,WAAoB,IAAIC,EAAUC,OAAOb,EAAgB,SAAvBa,CAA0B,IAAIC,EAAWD,OAAOR,EAA+B,EAAtCQ,CAAyCD,EAAU,GAAGG,EAASD,EAAW,GAAGE,EAAYF,EAAW,GAAOG,EAAUJ,OAAOb,EAAc,OAArBa,GAA0BA,OAAOb,EAAiB,UAAxBa,EAA2B,WAAga,OAArZI,EAAUC,QAAQT,GAAAA,CAAhU,yBAAmWQ,EAAUC,QAAQC,GAAGT,GAAkB,SAASU,GAAS,IAAIC,EAAgBR,OAAON,EAA+B,EAAtCM,CAAyCA,OAAON,EAA+B,EAAtCM,CAAyC,GAAGO,GAAS,GAAG,CAACE,QAAQF,EAAQG,WAAWN,EAAUC,QAAQM,KAAKR,GAAY,SAASD,GAAU,MAAM,GAAGU,OAAOZ,OAAOP,EAAmC,EAA1CO,CAA6CE,GAAU,CAACM,UAA+B,WAAWJ,EAAUC,QAAQQ,gBAAiB,IAAmJ,MAAM,CAACX,SAASA,EAASY,YAAxJ,SAAqBC,GAAaX,EAAUC,QAAQW,KAAKnB,EAAkB,CAACoB,KAAKF,EAAYL,SAASN,EAAUC,QAAQM,QAEh8BO,EAAclC,EAAoB,GAGwlD,IAAImC,EAAloD,WAAmB,IAAIC,EAAUtB,IAAeI,EAASkB,EAAUlB,SAASY,EAAYM,EAAUN,YAAgBf,EAAUC,OAAOb,EAAgB,SAAvBa,CAA0B,IAAIC,EAAWD,OAAOR,EAA+B,EAAtCQ,CAAyCD,EAAU,GAAGsB,EAAWpB,EAAW,GAAGqB,EAAcrB,EAAW,GAAOsB,EAAWvB,OAAOb,EAAc,OAArBa,GAAyX,OAAtBwB,QAAQC,IAAIvB,GAA6BF,OAAOkB,EAAiB,IAAxBlB,CAA2B,MAAM,CAAC0B,UAAU,MAAMC,SAAsB3B,OAAOkB,EAAkB,KAAzBlB,CAA4B,MAAM,CAAC0B,UAAU,YAAYC,SAAS,CAAc3B,OAAOkB,EAAkB,KAAzBlB,CAA4B,MAAM,CAAC0B,UAAU,oBAAoBC,SAAS,CAAc3B,OAAOkB,EAAiB,IAAxBlB,CAA2B,KAAK,CAAC2B,SAASzB,EAAS0B,KAAI,SAASrB,EAAQsB,GAAG,MAAsB,KAAftB,EAAQU,KAAuBjB,OAAOkB,EAAkB,KAAzBlB,CAA4B,KAAK,CAAC2B,SAAS,CAACpB,EAAQG,SAAS,IAAIH,EAAQU,OAAOY,GAAG,UAAuB7B,OAAOkB,EAAiB,IAAxBlB,CAA2B,MAAM,CAAC8B,IAAIP,OAA6BvB,OAAOkB,EAAkB,KAAzBlB,CAA4B,MAAM,CAAC0B,UAAU,mBAAmBC,SAAS,CAAc3B,OAAOkB,EAAiB,IAAxBlB,CAA2B,QAAQ,CAAC0B,UAAU,gBAAgBK,YAAY,qBAAqBC,QAAQ,WAAWC,MAAMZ,EAAWa,SAAh9B,SAAgCC,GAAGA,EAAEC,iBAAiBd,EAAca,EAAEE,OAAOJ,QAAm6BK,QAA14B,SAAqBH,GAAc,UAARA,EAAEI,MAAezB,EAAYO,GAAYC,EAAc,QAA21BtB,OAAOkB,EAAiB,IAAxBlB,CAA2B,SAAS,CAACwC,SAAsB,KAAbnB,EAAgBoB,QAArsC,WAAgCpB,IAAYP,EAAYO,GAAYC,EAAc,MAA6oCI,UAAU,cAAcC,SAAS,kBAE/kDpC,EAAkBmD,EAAEC,OAAoB3C,OAAOkB,EAAiB,IAAxBlB,CAA2BZ,EAAcsD,EAAEE,WAAW,CAACjB,SAAsB3B,OAAOkB,EAAiB,IAAxBlB,CAA2BmB,EAAQ,MAAM0B,SAASC,eAAe,WAIpL,CAAC,CAAC,GAAG,EAAE"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 45:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(38);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar build = __webpack_require__(39);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// CONCATENATED MODULE: ./src/ChatRoom.js\nvar NEW_MESSAGE_EVENT=\"new-message-event\";var SOCKET_SERVER_URL=\"http://localhost:3030\";var ChatRoom_ChatRoom=function ChatRoom(){var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var socketRef=Object(react[\"useRef\"])();Object(react[\"useEffect\"])(function(){socketRef.current=build_default()(SOCKET_SERVER_URL);socketRef.current.on(NEW_MESSAGE_EVENT,function(message){var incomingMessage=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},message),{},{isOwner:message.senderId===socketRef.current.id});setMessages(function(messages){return[].concat(Object(toConsumableArray[\"a\" /* default */])(messages),[incomingMessage]);});});return function(){socketRef.current.disconnect();};},[]);var sendMessage=function sendMessage(messageBody){socketRef.current.emit(NEW_MESSAGE_EVENT,{body:messageBody,senderId:socketRef.current.id});};return{messages:messages,sendMessage:sendMessage};};/* harmony default export */ var src_ChatRoom = (ChatRoom_ChatRoom);;\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){var _ChatRoom=src_ChatRoom(),messages=_ChatRoom.messages,sendMessage=_ChatRoom.sendMessage;var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),newMessage=_useState2[0],setNewMessage=_useState2[1];var messageRef=Object(react[\"useRef\"])();var handleSendMessage=function handleSendMessage(){if(newMessage){sendMessage(newMessage);setNewMessage(\"\");}};var handleNewMessageChange=function handleNewMessageChange(e){e.preventDefault();setNewMessage(e.target.value);};var handleKeyUp=function handleKeyUp(e){if(e.key===\"Enter\"){sendMessage(newMessage);setNewMessage(\"\");}};console.log(messages);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"message-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:messages.map(function(message,i){return message.body!==\"\"?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"li\",{children:[message.senderId,\" \",message.body]},i):null;})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messageRef})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"action-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"message-input\",placeholder:\"enter message here\",variant:\"outlined\",value:newMessage,onChange:handleNewMessageChange,onKeyUp:handleKeyUp}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{disabled:newMessage===\"\",onClick:handleSendMessage,className:\"send-button\",children:\"Send\"})]})]})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[81,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/youngjo/Desktop/code/socket_practica/Client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/youngjo/Desktop/code/socket_practica/Client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/youngjo/Desktop/code/socket_practica/Client/node_modules/postcss-loader/src/index.js??postcss!/Users/youngjo/Desktop/code/socket_practica/Client/src/App.css","/Users/youngjo/Desktop/code/socket_practica/Client/src/ChatRoom.js","/Users/youngjo/Desktop/code/socket_practica/Client/src/App.js","/Users/youngjo/Desktop/code/socket_practica/Client/src/index.js"],"names":["NEW_MESSAGE_EVENT","SOCKET_SERVER_URL","ChatRoom","useState","messages","setMessages","socketRef","useRef","useEffect","current","socketIOClient","on","message","incomingMessage","isOwner","senderId","id","disconnect","sendMessage","messageBody","emit","body","App","newMessage","setNewMessage","messageRef","handleSendMessage","handleNewMessageChange","e","preventDefault","target","value","handleKeyUp","key","console","log","map","i","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { useState, useEffect, useRef } from 'react';\nimport socketIOClient from 'socket.io-client';\n\nconst NEW_MESSAGE_EVENT = \"new-message-event\";\nconst SOCKET_SERVER_URL = \"http://localhost:3030\";\n\nconst ChatRoom = () => {\n    const [messages, setMessages] = useState([]);\n    const socketRef = useRef();\n\n    useEffect(() => {\n        socketRef.current = socketIOClient(SOCKET_SERVER_URL);\n        socketRef.current.on(NEW_MESSAGE_EVENT, (message) => {\n            const incomingMessage = {\n                ...message,\n                isOwner: message.senderId === socketRef.current.id,    \n            };\n            setMessages((messages) => [...messages, incomingMessage]);\n        });\n\n        return (() => {\n            socketRef.current.disconnect();\n        })\n    }, []);\n\n    const sendMessage = (messageBody) => {\n        socketRef.current.emit(NEW_MESSAGE_EVENT, {\n            body: messageBody,\n            senderId: socketRef.current.id,\n        })\n    }\n\n    return { messages, sendMessage }\n}\n\nexport default ChatRoom;;","import React, { useState, useRef } from 'react';\nimport './App.css';\nimport ChatRoom from './ChatRoom';\n\nfunction App() {\n  const { messages, sendMessage } = ChatRoom();\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messageRef = useRef();\n\n  const handleSendMessage = () => {\n    if ( newMessage ) {\n      sendMessage(newMessage);\n      setNewMessage(\"\");\n    }\n  };\n\n  const handleNewMessageChange = (e) => {\n    e.preventDefault();\n    setNewMessage(e.target.value)\n  }\n\n  const handleKeyUp = (e) => {\n    if(e.key === \"Enter\"){\n      sendMessage(newMessage);\n      setNewMessage(\"\");\n    }\n  }\n\n  console.log(messages)\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"message-container\">\n          <ul>\n            { messages.map((message, i) => (\n                  message.body !== \"\" ? (\n                    <li key={i}>\n                      { message.senderId } { message.body }\n                    </li>\n                  ) : null\n            ))}\n          </ul>\n          <div ref={ messageRef }></div>\n        </div>\n        <div className=\"action-container\">\n          <input\n            className=\"message-input\"\n            placeholder=\"enter message here\"\n            variant=\"outlined\"\n            value={ newMessage }\n            onChange={ handleNewMessageChange }\n            onKeyUp = { handleKeyUp }\n          />\n          <button\n            disabled = { newMessage === \"\" }\n            onClick={handleSendMessage}\n            className=\"send-button\"\n          >\n            Send\n          </button>\n        </div>\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"]}}