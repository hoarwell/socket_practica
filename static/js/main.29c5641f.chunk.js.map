{"version":3,"sources":["ChatRoom.js","App.js","index.js"],"names":["NEW_MESSAGE_EVENT","ChatRoom","useState","messages","setMessages","socketRef","useRef","useEffect","current","socketIOClient","on","message","incomingMessage","isOwner","senderId","id","disconnect","sendMessage","messageBody","emit","body","App","newMessage","setNewMessage","messageRef","console","log","className","map","i","ref","placeholder","variant","value","onChange","e","preventDefault","target","onKeyUp","key","disabled","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mNAGMA,EAAoB,oBAgCXC,EA7BE,WACb,MAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACMC,EAAYC,mBAElBC,qBAAU,WAUN,OATAF,EAAUG,QAAUC,IAPF,yBAQlBJ,EAAUG,QAAQE,GAAGV,GAAmB,SAACW,GACrC,IAAMC,EAAe,2BACdD,GADc,IAEjBE,QAASF,EAAQG,WAAaT,EAAUG,QAAQO,KAEpDX,GAAY,SAACD,GAAD,4BAAkBA,GAAlB,CAA4BS,UAGpC,WACJP,EAAUG,QAAQQ,gBAEvB,IASH,MAAO,CAAEb,WAAUc,YAPC,SAACC,GACjBb,EAAUG,QAAQW,KAAKnB,EAAmB,CACtCoB,KAAMF,EACNJ,SAAUT,EAAUG,QAAQO,Q,OCsCzBM,MA9Df,WACE,MAAkCpB,IAA1BE,EAAR,EAAQA,SAAUc,EAAlB,EAAkBA,YAClB,EAAoCf,mBAAS,IAA7C,mBAAOoB,EAAP,KAAmBC,EAAnB,KACMC,EAAalB,mBAsBnB,OADAmB,QAAQC,IAAIvB,GAEV,qBAAKwB,UAAU,MAAf,SACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,UACE,6BACIxB,EAASyB,KAAI,SAACjB,EAASkB,GAAV,MACQ,KAAjBlB,EAAQS,KACN,+BACIT,EAAQG,SADZ,IACyBH,EAAQS,OADxBS,GAGP,UAGZ,qBAAKC,IAAMN,OAEb,sBAAKG,UAAU,mBAAf,UACE,uBACEA,UAAU,gBACVI,YAAY,qBACZC,QAAQ,WACRC,MAAQX,EACRY,SAlCqB,SAACC,GAC9BA,EAAEC,iBACFb,EAAcY,EAAEE,OAAOJ,QAiCfK,QA9BU,SAACH,GACN,UAAVA,EAAEI,MACHtB,EAAYK,GACZC,EAAc,QA6BV,wBACEiB,SAA4B,KAAflB,EACbmB,QA9CgB,WACnBnB,IACHL,EAAYK,GACZC,EAAc,MA4CRI,UAAU,cAHZ,2BCjDVe,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.29c5641f.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport socketIOClient from 'socket.io-client';\n\nconst NEW_MESSAGE_EVENT = \"new-message-event\";\nconst SOCKET_SERVER_URL = \"http://localhost:3030\";\n\nconst ChatRoom = () => {\n    const [messages, setMessages] = useState([]);\n    const socketRef = useRef();\n\n    useEffect(() => {\n        socketRef.current = socketIOClient(SOCKET_SERVER_URL);\n        socketRef.current.on(NEW_MESSAGE_EVENT, (message) => {\n            const incomingMessage = {\n                ...message,\n                isOwner: message.senderId === socketRef.current.id,    \n            };\n            setMessages((messages) => [...messages, incomingMessage]);\n        });\n\n        return (() => {\n            socketRef.current.disconnect();\n        })\n    }, []);\n\n    const sendMessage = (messageBody) => {\n        socketRef.current.emit(NEW_MESSAGE_EVENT, {\n            body: messageBody,\n            senderId: socketRef.current.id,\n        })\n    }\n\n    return { messages, sendMessage }\n}\n\nexport default ChatRoom;;","import React, { useState, useRef } from 'react';\nimport './App.css';\nimport ChatRoom from './ChatRoom';\n\nfunction App() {\n  const { messages, sendMessage } = ChatRoom();\n  const [newMessage, setNewMessage] = useState(\"\");\n  const messageRef = useRef();\n\n  const handleSendMessage = () => {\n    if ( newMessage ) {\n      sendMessage(newMessage);\n      setNewMessage(\"\");\n    }\n  };\n\n  const handleNewMessageChange = (e) => {\n    e.preventDefault();\n    setNewMessage(e.target.value)\n  }\n\n  const handleKeyUp = (e) => {\n    if(e.key === \"Enter\"){\n      sendMessage(newMessage);\n      setNewMessage(\"\");\n    }\n  }\n\n  console.log(messages)\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"message-container\">\n          <ul>\n            { messages.map((message, i) => (\n                  message.body !== \"\" ? (\n                    <li key={i}>\n                      { message.senderId } { message.body }\n                    </li>\n                  ) : null\n            ))}\n          </ul>\n          <div ref={ messageRef }></div>\n        </div>\n        <div className=\"action-container\">\n          <input\n            className=\"message-input\"\n            placeholder=\"enter message here\"\n            variant=\"outlined\"\n            value={ newMessage }\n            onChange={ handleNewMessageChange }\n            onKeyUp = { handleKeyUp }\n          />\n          <button\n            disabled = { newMessage === \"\" }\n            onClick={handleSendMessage}\n            className=\"send-button\"\n          >\n            Send\n          </button>\n        </div>\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}